{% extends "base.html" %}

{% block title %}ç³»çµ±ç¸½è¦½ - æ™ºèƒ½å€‰å„²ç®¡ç†ç³»çµ±{% endblock %}

{% block content %}
<style>
    .dashboard-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 40px;
        border-radius: 10px;
        color: white;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .dashboard-header h2 {
        margin: 0 0 10px 0;
        font-size: 32px;
        font-weight: 600;
    }
    
    .dashboard-header p {
        margin: 0;
        opacity: 0.9;
        font-size: 16px;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        transition: transform 0.2s, box-shadow 0.2s;
        border-left: 4px solid transparent;
    }
    
    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }
    
    .stat-card:nth-child(1) {
        border-left-color: #667eea;
    }
    
    .stat-card:nth-child(2) {
        border-left-color: #28a745;
    }
    
    .stat-card:nth-child(3) {
        border-left-color: #ffc107;
    }
    
    .stat-card:nth-child(4) {
        border-left-color: #17a2b8;
    }
    
    .stat-card h3 {
        margin: 0 0 15px 0;
        font-size: 14px;
        color: #6c757d;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
    }
    
    .stat-card .value {
        font-size: 42px;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 10px;
    }
    
    .stat-card .detail {
        color: #6c757d;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .feature-section {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 30px;
    }
    
    .feature-section h3 {
        margin: 0 0 20px 0;
        color: #2d3748;
        font-size: 20px;
        font-weight: 600;
    }
    
    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }
    
    .feature-btn {
        padding: 20px;
        text-align: center;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        font-weight: 600;
    }
    
    .feature-btn:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
    }
    
    .feature-btn .icon {
        font-size: 32px;
    }
    
    .info-section {
        background: linear-gradient(135deg, #e7f3ff 0%, #f0e7ff 100%);
        padding: 30px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
    }
    
    .info-section h4 {
        color: #667eea;
        margin: 0 0 20px 0;
        font-size: 18px;
        font-weight: 600;
    }
    
    .info-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .info-list li {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .info-list .icon {
        font-size: 24px;
        flex-shrink: 0;
    }
    
    .info-list .content {
        flex: 1;
    }
    
    .info-list .title {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 4px;
    }
    
    .info-list .desc {
        color: #6c757d;
        font-size: 14px;
        line-height: 1.6;
    }
</style>

<div class="dashboard-header">
    <h2>ğŸ“Š æ™ºèƒ½å€‰å„²ç®¡ç†ç³»çµ±</h2>
    <p>å¯¦æ™‚ç›£æ§å€‰å„²è¨­å‚™ã€æ™ºèƒ½è¨ˆç®—åº«å­˜ã€æ•¸æ“šåˆ†æé©…å‹•æ±ºç­–</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>ğŸ“± è¨­å‚™ç›£æ§</h3>
        <div class="value">{{ stats.device_count }}</div>
        <div class="detail">
            <span style="color: #28a745;">ğŸŸ¢ {{ stats.online_devices }}</span>
            <span>|</span>
            <span style="color: #dc3545;">ğŸ”´ {{ stats.device_count - stats.online_devices }}</span>
        </div>
    </div>
    
    <div class="stat-card">
        <h3>ğŸ—„ï¸ è²¨æ¶ç®¡ç†</h3>
        <div class="value">{{ stats.shelf_count }}</div>
        <div class="detail">
            <span style="color: #28a745;">ğŸŸ¢ {{ stats.active_shelves }} æ´»èº</span>
            <span>|</span>
            <span>âœ… {{ stats.shelves_with_products }} å·²é…ç½®</span>
        </div>
    </div>
    
    <div class="stat-card">
        <h3>ğŸ“¦ å•†å“ç¨®é¡</h3>
        <div class="value">{{ stats.product_count }}</div>
        <div class="detail">
            <span>ğŸ“Š ç¸½åº«å­˜: {{ stats.total_stock }} ä»¶</span>
        </div>
    </div>
    
    <div class="stat-card">
        <h3>ğŸ“ˆ æ•¸æ“šè¨˜éŒ„</h3>
        <div class="value">{{ stats.data_count }}</div>
        <div class="detail">
            <span>å ç”¨ç‡: {{ "%.1f"|format(stats.occupancy_rate) }}%</span>
        </div>
    </div>
</div>

<div class="feature-section">
    <h3>ğŸš€ å¿«é€Ÿæ“ä½œ</h3>
    <div class="feature-grid">
        <a href="{{ url_for('devices') }}" class="feature-btn">
            <span class="icon">ğŸ­</span>
            <span>è¨­å‚™ç›£æ§</span>
        </a>
        <a href="{{ url_for('shelves') }}" class="feature-btn">
            <span class="icon">ğŸ—„ï¸</span>
            <span>è²¨æ¶ç®¡ç†</span>
        </a>
        <a href="{{ url_for('products') }}" class="feature-btn">
            <span class="icon">ğŸ“¦</span>
            <span>å•†å“ç®¡ç†</span>
        </a>
        <a href="{{ url_for('sensor_data') }}" class="feature-btn">
            <span class="icon">ğŸ“Š</span>
            <span>æ•¸æ“šåˆ†æ</span>
        </a>
    </div>
</div>

<div class="info-section">
    <h4>ğŸ’¡ ç³»çµ±åŠŸèƒ½</h4>
    <ul class="info-list">
        <li>
            <span class="icon">ğŸ­</span>
            <div class="content">
                <div class="title">è¨­å‚™ç›£æ§ä¸­å¿ƒ</div>
                <div class="desc">å¯¦æ™‚ç›£æ§æ‰€æœ‰ ESP32 æ„Ÿæ¸¬è¨­å‚™ï¼Œè‡ªå‹•æª¢æ¸¬è¨­å‚™ç‹€æ…‹ï¼Œç®¡ç†è¨­å‚™å€åŸŸåˆ†é…</div>
            </div>
        </li>
        <li>
            <span class="icon">ğŸ“</span>
            <div class="content">
                <div class="title">æ™ºèƒ½æ ¡æ­£ç³»çµ±</div>
                <div class="desc">è‡ªå‹•æ¸¬é‡è²¨æ¶é•·åº¦ï¼Œ10æ¬¡æ¡æ¨£å¹³å‡å€¼ï¼Œç¢ºä¿ç²¾æº–çš„åº«å­˜è¨ˆç®—åŸºç¤</div>
            </div>
        </li>
        <li>
            <span class="icon">ğŸ—„ï¸</span>
            <div class="content">
                <div class="title">è²¨æ¶é…ç½®ç®¡ç†</div>
                <div class="desc">éˆæ´»é…ç½®è²¨æ¶å•†å“ç¶å®šï¼Œå•Ÿç”¨/åœç”¨æ§åˆ¶ï¼Œæ”¯æ´å¤šå•†å“å‹•æ…‹ç®¡ç†</div>
            </div>
        </li>
        <li>
            <span class="icon">ğŸ“Š</span>
            <div class="content">
                <div class="title">æ™ºèƒ½åº«å­˜è¨ˆç®—</div>
                <div class="desc">åŸºæ–¼è¶…éŸ³æ³¢æ¸¬è·è‡ªå‹•è¨ˆç®—å•†å“æ•¸é‡ï¼š(è²¨æ¶é•·åº¦ - æ¸¬é‡å€¼) / å•†å“é•·åº¦</div>
            </div>
        </li>
        <li>
            <span class="icon">ğŸ“ˆ</span>
            <div class="content">
                <div class="title">å¯¦æ™‚æ•¸æ“šåˆ†æ</div>
                <div class="desc">å¯¦æ™‚æ„Ÿæ¸¬å™¨æ•¸æ“šæ¡é›†ï¼Œæ­·å²è¨˜éŒ„æŸ¥è©¢ï¼Œå ç”¨ç‡çµ±è¨ˆï¼Œå¡«å……ç‡å¯è¦–åŒ–</div>
            </div>
        </li>
        <li>
            <span class="icon">ğŸ”—</span>
            <div class="content">
                <div class="title">MQTT å³æ™‚é€šè¨Š</div>
                <div class="desc">ç©©å®šçš„ MQTT å”è­°é€šè¨Šï¼ŒQoS 1 ä¿è­‰è¨Šæ¯é€é”ï¼Œæ”¯æ´å¤šè¨­å‚™ä¸¦ç™¼</div>
            </div>
        </li>
    </ul>
</div>
{% endblock %}
